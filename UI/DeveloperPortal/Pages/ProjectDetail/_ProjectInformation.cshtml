

<div>
    @Html.AntiForgeryToken()

    <div class="alert alert-info mt-2" role="alert">
        <strong>Building, Parking, and Unit Information</strong><br />
        On this page, you can manage all <b>Building</b>, <b>Parking</b>, and <b>Unit</b> details for your project.<br />
        Please make sure the <b>Site Information</b> has been completed in the <b>Site Information</b> tab before adding any building.<br />
        Once the site information is provided, you can begin by <b>adding a building</b>. After adding at least one building, you’ll be able to enter or upload unit information and update parking details.
    </div>

@*     <div class="k-grid " style="margin-top:10px;">
        <div class="k-header k-grid-toolbar">
            <span class="k-grid-header-title"> Building Information</span>
            <a id="addBuildingInformation" class="k-button k-button-icontext k-grid-add btn btn-primary btn-sm" role="button" role-access="true" onclick="BuildingInformation.AddBuildingInfo()">Add Building</a>
        </div>
    </div>
 *@
    <div class="border-bottom pb-2 mb-3">
        <div class="row align-items-center">
            <div class="col-md-6 col-12">
                <h4 class="mb-0">Building Information</h4>
            </div>
            <div class="col-md-6 col-12 text-md-end mt-2 mt-md-0">
                <button id="uploadFundingSourceBtn"
                        class="btn btn-primary"
                        type="button" role="button" role-access="true" onclick="BuildingInformation.AddBuildingInfo()">
                    Add Funding Source
                </button>
            </div>
        </div>
    </div>

    @*     <div class="mt-2 ms-1 text-start">
        <a id="addBuildingInformation"
           class="btn btn-primary btn-sm"
           role="button"
           role-access="true"
           onclick="BuildingInformation.AddBuildingInfo()">
            Add Building
        </a>
    </div> *@


    <div class=" k-box-body">
        <br />
        <table id="dtPrkingData"></table>
    </div>
@*     <div style="position: absolute; z-index: 1; right: 225px; padding-top:2px; ">
        <input autocomplete="off" id="search-unit-grid" placeholder="Search..." tabindex="0" class="k-textbox form-control" style="height: 38px !important;" />
        <label for="search-unit-grid" tabindex="0" style="display:none">Search</label>
    </div>

    <div style="position: absolute;right: 115px;z-index: 1; margin-top:1px">
        <button class="btn btn-primary no-access" id="uploadUnitExcel" role-access="true" style="height: 42px;border-radius: 0px; ">
            Upload <i class="fa fa-upload"></i>
        </button>
    </div> *@
    <!-- Responsive toolbar above the grid -->
    <div class="row align-items-center gy-2 mb-2">
        <!-- Right: Search + Upload (right-aligned on md+, stacked on small) -->
        <div class="col-12 col-md d-flex justify-content-md-end align-items-center gap-2">
            <label for="search-unit-grid" class="visually-hidden">Search Units : &nbsp;</label>
            &nbsp;
            <input id="search-unit-grid"
                   type="text"
                   class="form-control"
                   placeholder="Search..."
                   style="width: clamp(180px, 30vw, 280px); height: 38px;"
                   autocomplete="off" />
            &nbsp;
            <button class="btn btn-primary btn-sm" id="uploadUnitExcel" role-access="true">
                Upload <i class="fa fa-upload"></i>
            </button>
        </div>
    </div>
    <div id="unitKgrid"></div>
    <div id="kednoWindow"></div>
    <table style="width:100%;margin-top:5px;" class="hide-hover">
        <tr>
            <td style="width: 45%; vertical-align: top;">
                <div id="tblTotalUnit">
                    <div class="k-grid totalGrid">
                        <table style="width:100%">
                            <thead>
                                <tr>
                                    <th colspan="3" scope="col" role="columnheader" dclass="k-header">
                                        Total Number of Units
                                    </th>
                                </tr>
                            </thead>
                            <tr>
                                <td colspan="2">SRO</td>
                                <td style="width: 90px; text-align: right"><lable id="lblSROCount"></lable></td>
                            </tr>
                            <tr>
                                <td colspan="2">Studio</td>
                                <td style="width: 90px; text-align: right"><lable id="lblStudioCount"></lable></td>
                            </tr>
                            <tr>
                                <td colspan="2">Efficiency</td>
                                <td style="text-align:right"><lable id="lblEfficiencyCount"></lable></td>
                            </tr>
                            <tr>
                                <td colspan="2">1 Bedroom</td>
                                <td style="text-align:right"><lable id="lblBedroom1Count"></lable></td>
                            </tr>
                            <tr>
                                <td colspan="2">2 Bedroom</td>
                                <td style="text-align:right"><lable id="lblBedroom2Count"></lable></td>
                            </tr>
                            <tr>
                                <td colspan="2">3 Bedroom</td>
                                <td style="text-align:right"><lable id="lblBedroom3Count"></lable></td>
                            </tr>
                            <tr>
                                <td colspan="2">4 Bedroom</td>
                                <td style="text-align:right"><lable id="lblBedroom4Count"></lable></td>
                            </tr>
                            <tr>
                                <td colspan="2">5+ Bedroom</td>
                                <td style="text-align:right"><lable id="lblBedroom5Count"></lable></td>
                            </tr>

                            <tr>
                                <td colspan="2">Manager Unit </td>
                                <td style="text-align:right"><lable id="lblManagerUnitCount"></lable></td>
                            </tr>
                            <tr>
                                <td colspan="2">Grand Total</td>
                                <td style="text-align:right; font-weight:bold"><lable id="lblTotalCount"></lable></td>
                            </tr>
                        </table>

                    </div>
                </div>
            </td>
            <td style="width:100px ">
            </td>
            <td>
                <div id="tblTotalCSAVCA">
                    <div class="k-grid totalGrid">
                        <table style="width:100%">
                            <thead>
                                <tr>
                                    <th colspan="2" scope="col" role="columnheader" dclass="k-header">
                                        Total # Units for VCA & CSA:
                                    </th>
                                    <th style="border-left: 1px solid #dee2e6; text-align: right; width:100px">
                                        CSA #: <lable id="lblUnitDesignatedCSACount"></lable>
                                    </th>
                                    <th style="border-left: 1px solid #dee2e6; text-align: right; width:100px">
                                        VCA#: <lable id="lblUnitDesignatedVCACount"></lable>
                                    </th>
                                </tr>
                            </thead>
                            <tr>

                                <td style="width:90px;text-align:right"><lable id="lblTotalMobilityUntCount"></lable></td>
                                <td colspan="3"> Total Number of Mobility Units</td>
                            </tr>
                            <tr>
                                <td style="width:90px;text-align:right"><lable id="lblTotalCommunicationUntCount"></lable></td>
                                <td colspan="3"> Total Number of Communication Units</td>
                            </tr>
                            <tr>
                                <td style="width:90px;text-align:right"><lable id="lblTotalAdaptableUntCount"></lable></td>
                                <td colspan="3">  Total Number of Adaptable Units</td>
                            </tr>
                            <tr>
                                <td style="width:90px;text-align:right"><lable id="lblTotalMobilityUnitsPer"></lable>% </td>
                                <td colspan="3">Total % of Mobility Units Provided for this Project</td>
                            </tr>

                            <tr>
                                <td style="width:90px;text-align:right"><lable id="lblTotalCommunicationsPer"></lable>% </td>
                                <td colspan="3">Total % of Communications Units Max Counted for CSA and VCA 4%</td>
                            </tr>
                            <tr>
                                <td style="width:90px;text-align:right"><lable id="lblTotalCommunicationCount"></lable></td>
                                <td colspan="3">Total number for Communications Units Counted for CSA and VCA</td>
                            </tr>
                            <tr>
                                <td style="width:90px;text-align:right"><lable id="lblTotalMobilityUnitsVCAPer"></lable>% </td>
                                <td colspan="3">% of Mobility Units for Compliance with VCA Max. 11%</td>
                            </tr>
                            <tr>
                                <td style="width:90px;text-align:right"><lable id="lblTotalMobilityUnitsVCACount"></lable></td>
                                <td colspan="3">Number of Mobility Units for Compliance with VCA</td>
                            </tr>
                            <tr>
                                <td style="width:90px;text-align:right"><lable id="lblTotalMobilityUnitsCSAPer"></lable>% </td>
                                <td colspan="3"> % of Mobility Units for Compliance with CSA Max. 16% </td>

                            </tr>
                            <tr>
                                <td style="width:90px;text-align:right"><lable id="lblTotalMobilityUnitsCSACount"></lable></td>
                                <td colspan="3">  Number of Mobility Units for Compliance with CSA</td>
                            </tr>
                        </table>

                    </div>
                </div>
            </td>
        </tr>
    </table>

</div>
<div id="permitNumberInformationPopup" class="modal fade" role="dialog" data-bs-backdrop="static" data-bs-keyboard="false" tabindex='-1'>
    <div class="modal-dialog modal-dialog-centered  modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="permitNumberInformationPopupTitle"></div>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close"><i class="far fa-times-circle"></i></button>
            </div>
            <div class="modal-body" style="height:100% ;overflow:auto">
            </div>
            <div class="modal-footer" style="padding:10px;">
                <button type="button" id="permitNumberClosebtn" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modal-building-add" role="dialog" data-bs-backdrop="static" data-bs-keyboard="false"></div>
<script type="text/x-kendo-template" id="windowTemplate">
    <p>ACHPNo  <strong>#= achpNo #</strong> ? </p>
     <div class=" multi-button" style="float:right">
        <button class=" btn btn btn-primary k-button k-button-md k-rounded-md k-button-solid k-button-solid-base" id="yesButton"><span class="k-button-text">Yes</span></button>
    <button class="btn btn btn-secondary  k-button k-button-md k-rounded-md k-button-solid k-button-solid-base" id="noButton"><span class="k-button-text">No</span></button>
            </div>
</script>

<script type="text/javascript">
    UnitMatrixInformation.init();
</script>


<style>
    /* Put label + buttons on one row */
    #dtPrkingData_paginate {
        display: flex !important; /* override DT/Bootstrap floats */
        align-items: center !important; /* vertical centering */
        gap: 8px;
        flex-wrap: wrap;
    }

        /* Make the DIV label behave like the pill */
        #dtPrkingData_paginate .select-site-title {
            display: inline-flex; /* flex so text centers vertically */
            align-items: center;
            height: 28px; /* match your pill height */
            line-height: 28px;
            margin: 0; /* kill top/bottom margins */
            padding: 0; /* no padding shift */
            font-weight: 600;
            vertical-align: middle;
        }

        /* Your pill/button (keep what you already had; these ensure centering) */
        #dtPrkingData_paginate .paginate_button,
        #dtPrkingData_paginate .building-pill {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            height: 28px;
            line-height: 1;
            padding: 6px 12px;
            border-radius: 2px;
            border: 1px solid #ccc;
            background: #111;
            color: #fff !important;
            text-decoration: none !important;
            box-sizing: border-box;
            font-weight: 500;
        }

        /* (Optional) tiny nudge if fonts render 1px off on some browsers */
        #dtPrkingData_paginate .select-site-title {
            transform: translateY(1px);
        }

</style>