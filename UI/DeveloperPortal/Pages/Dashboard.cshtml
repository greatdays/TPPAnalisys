@page
@model DeveloperPortal.Pages.DashboardModel


<div class="page-content">
	<div class="row">
		<div class="col-md-8">
			<h3 class="title" style="color:#393939; margin-bottom: 0;">My Dashboard</h3>
		</div>
	</div>

	<div class="row dashboard-header-row">
		<div class="col-md-10 offset-md-1 button-container">
			<button class="edit-project-button" onclick="Dashboard.DisplayModal()">Edit Project(s)</button>
		</div>
	</div>

	<div class="row">
		<div class="col-md-10 offset-md-1">
			<div class="dashboard-summary-container content-box">
				<span class="dashboard-summary-header">
					My Projects
				</span>
				<div style="height:88.5%;overflow:auto;scroll-behavior:smooth;scrollbar-width:thin">
					<table id="tblMyProjects" class="display" style="width:100%">
						<thead>
							<tr>
								<th>ACHP Number</th>
								<th>Project Name</th>
								<th>Project Address</th>
								<th>Project Type</th>
								<th>Status</th>
							</tr>
						</thead>
					</table>
				</div>
			</div>
		</div>
	</div>
	<div class="row" style="display:none">
		<div class="col-md-4">
			<div class="dashboard-summary-container content-box">
				<span class="dashboard-summary-header text-bold">
					New Projects Submitted
				</span>
				<div style="height:88.5%;overflow:auto;scroll-behavior:smooth;scrollbar-width:thin">
					<table id="tblNewProjects" class="display" style="width:100%">
						<thead style="display:none">
							<tr>
								<th>Name</th>
							</tr>
						</thead>
					</table>
				</div>
			</div>
		</div>
		<div class="col-md-4">
			<div class="dashboard-summary-container content-box">
				<span class="dashboard-summary-header text-bold">
					Plan Review
				</span>
				<div style="height:88.5%;overflow:auto;scroll-behavior:smooth;scrollbar-width:thin">
					<table id="tblPlanReview" class="display" style="width:100%">
						<thead style="display:none">
							<tr>
								<th>Name</th>
							</tr>
						</thead>
					</table>
				</div>
			</div>
		</div>
		<div class="col-md-4">
			<div class="dashboard-summary-container content-box">
				<span class="dashboard-summary-header text-bold">
					Site Inspection
				</span>
				<div style="height:88.5%;overflow:auto;scroll-behavior:smooth;scrollbar-width:thin">
					<table id="tblSiteInspection" class="display" style="width:100%">
						<thead style="display:none">
							<tr>
								<th>Name</th>
							</tr>
						</thead>
					</table>
				</div>
			</div>
		</div>
		<div class="col-md-4">
			<div class="dashboard-summary-container content-box">
				<span class="dashboard-summary-header text-bold">
					NAC
				</span>
				<div style="height:88.5%;overflow:auto;scroll-behavior:smooth;scrollbar-width:thin">
					<table id="tblNACInspection" class="display" style="width:100%">
						<thead style="display:none">
							<tr>
								<th>Name</th>
							</tr>
						</thead>
					</table>
				</div>
			</div>
		</div>
		<div class="col-md-4">
			<div class="dashboard-summary-container content-box">
				<span class="dashboard-summary-header text-bold">
					Completed Certification
				</span>
				<div style="height:88.5%;overflow:auto;scroll-behavior:smooth;scrollbar-width:thin">
					<table id="tblCompletedCert" class="display" style="width:100%">
						<thead style="display:none">
							<tr>
								<th>Name</th>
							</tr>
						</thead>
					</table>
				</div>
			</div>
		</div>
	</div>
</div>
<!--modal-->
<div class="modal fade" id="ActionModal" tabindex="-1" role="dialog"
	 aria-labelledby="ActionModalLabel" aria-hidden="true"
	 data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<!-- Centered modal -->
		<div class="modal-content">



			<!-- Modal Header -->
			<div class="modal-header  text-white" style=" background-color : #2C3E5C !important">
				<h5 class="modal-title text-white" id="ActionModalLabel">Edit Project(s)</h5>
				<!-- Disabled X close -->
				<!-- <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button> -->
			</div>

			<!-- Modal Body -->
			<div class="modal-body">
				<p class="small text-danger mb-3">All fields marked with an asterisk (*) are required!</p>
				<h5>Provide your AcHP Number(s)</h5>
				<p class="small mb-3">If you do not know your AcHP Number, please contact your assigned RCS.</p>

				<form id="projectForm" onsubmit="Dashboard.handleSubmit(event)">
					<div class="form-group">
						<label for="acHpInput" class="font-weight-bold required">AcHP Number *</label>
						<div class="input-group">
							<input type="text" id="acHpInput" class="form-control" placeholder="AcHP Number" required>
							<div class="input-group-append">
								<button class="btn btn-primary" type="button" onclick="Dashboard.addProject()">Add</button>
							</div>
						</div>
						<div id="acHpError" class="text-danger mt-1" style="display: none;">Please enter an AcHP Number.</div>
						<div id="noData" class="text-danger mt-1" style="display: none;">No data found.</div>
						<div id="validationMessage" class="text-danger mt-1" style="display: none;"></div>
					</div>

					<!-- Project List -->
					<div id="divProjects" class="mb-3"></div>
				</form>
			</div>

			<!-- Modal Footer -->
			<div class="modal-footer d-flex justify-content-end">
				<button type="submit" class="btn btn-primary" form="projectForm">Submit</button>
				<button type="button" class="btn btn-secondary" onclick="$('#ActionModal').modal('hide')">Cancel</button>
			</div>

		</div>
	</div>
</div>


@section Scripts {
	<!-- Load Dashboard.js first -->
	<script src="~/pagescripts/dashboard/dashboard.js"></script>

	<!-- Then safely call its methods -->
	<script>
		$(document).ready(function () {
			Dashboard.init();
			Dashboard.PopulateMyProjectData();

			const loader = document.getElementById('cm_loader');
			if (loader) {
				loader.style.display = 'none';
			}
		});
	</script>
}