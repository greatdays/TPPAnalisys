@{
    Layout = "_Layout";
}
@using Microsoft.Extensions.Configuration
@inject IConfiguration Configuration

@{
    string status = ViewData["Status"]?.ToString();
    string message = ViewData["Message"]?.ToString();
    string appUrl = Configuration["AppSettings:ApplicationURL"];
}
@* <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link href="~/css/custom.css" rel="stylesheet" /> *@

<!-- Modal HTML -->
<div id="divUserAccountActivity" class="modal fade" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="AccountActivationTitle">Account Activation</h5>
            </div>
            <div class="modal-body text-center">
                <div class="h5">
                    @if (!string.IsNullOrEmpty(status))
                    {
                        switch (status)
                        {
                            case "Expired":
                                <span>Could not activate your account because your activation code is expired. Please register again to our application.</span>
                                break;
                            case "NotActivated":
                                <span>Could not activate your account because your activation code is either expired or invalid. Please contact AcHP team at lahd.achp@lacity.org for further assistance.</span>
                                break;
                            case "AlreadyActivated":
                                <span>Your account is already activated. You may now log in with your email and password.</span>
                                break;
                            case "Success":
                                <span>Your account is activated successfully. You may now log in with your email and password.</span>
                                break;
                            case "SystemError":
                                <span>Your account is not activated due to a system error. Please contact our AcHP Support Team for further assistance.</span>
                                break;
                            case "DomainDifferent":
                                <span>Your account is currently on hold. Please wait until LAHD staff approves your account. You will be notified upon approval.</span>
                                break;
                            default:
                                <span>@message</span>
                                break;
                        }
                    }
                </div>
            </div>
            <div class="modal-footer">
                <button id="btnUserActivityOK" type="button" class="btn btn-primary">Ok</button>
            </div>
        </div>
    </div>
</div>

@* <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
 *@

<script>

    $(document).ready(function () {
        var status = '@status';
        var APPurl = '@appUrl';
    
        // Show modal only if status is not null/empty
        if (status && status.trim() !== "") {
            $('#divUserAccountActivity').modal('show');
        }

        // Redirect to app URL on OK click
        $('#btnUserActivityOK').click(function () {
            window.location.href = APPurl;
        });
    });
</script>

